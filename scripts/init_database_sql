/*
==============================================================
Создание базы данных и схем
==============================================================
Назначение скрипта:
Этот скрипт создает новую базу данных с именем «DataWarehouse» после проверки на ее существование.
Если база данных существует, она удаляется и создается заново. Кроме того, скрипт настраивает три схемы

в базе данных: «bronze», «silver» и «gold».

ВНИМАНИЕ:
Запуск этого скрипта приведет к удалению всей базы данных «DataWarehouse», если она существует.

Все данные в базе данных будут безвозвратно удалены. Действуйте с осторожностью и убедитесь, что у вас есть надлежащие резервные копии, прежде чем запускать этот скрипт.

*/

USE master;
GO

-- Удалите и создайте заново базу данных 'DataWarehouse'.
IF EXISTS (SELECT 1 FROM sys.databases WHERE name = 'DataWarehouse')
BEGIN
    ALTER DATABASE DataWarehouse SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
    DROP DATABASE DataWarehouse;
END;
GO

-- Создайте базу данных 'DataWarehouse'
CREATE DATABASE DataWarehouse;
GO

USE DataWarehouse;
GO

-- Создание схем
CREATE SCHEMA bronze;
GO

CREATE SCHEMA silver;
GO

CREATE SCHEMA gold;
GO
